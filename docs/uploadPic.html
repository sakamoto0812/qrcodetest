<!DOCTYPE html>
<html lang='ja'>
    <head>
        <meta charset="utf-8">
        <title>選択した画像を画面に表示する。</title>
        <script src="./js/jquery-3.3.1.min.js"></script>   
        <style>
          ul {
            list-style: none;
          }
          #fileList div {            
            display: inline-block;
            width: 50%;
          }
          img {
            width: 60%;
            height: 50%;
          }
        </style>
    </head>
    <body>
        <input type="file" id="fileElem" multiple accept="image/*" style="display:none" onchange="handleFiles(this.files)">
        <a href="#" id="fileSelect">Select some files</a> 
        <div id="fileList"></div>
        <script>
            window.URL = window.URL || window.webkitURL;

            var fileSelect = document.getElementById("fileSelect"),
                fileElem   = document.getElementById("fileElem"),
                fileList   = document.getElementById("fileList");

            fileSelect.addEventListener("click", function (e) {
              if (fileElem) {
                fileElem.click();
              }
              e.preventDefault(); // prevent navigation to "#"
            }, false);

            function handleFiles(files) {
              if (!files.length) {
                fileList.innerHTML = "<p>No files selected!</p>";
              } else {          
                for (var i = 0; i < files.length; i++) {
                  const divImg = document.createElement("div");
                  var img = document.createElement("img");
                  img.src = window.URL.createObjectURL(files[i]);
                  img.onload = function(e) {
                    window.URL.revokeObjectURL(this.src);
                  }
                  divImg.appendChild(img);
                  fileList.appendChild(divImg);    

    /*              var info = document.createElement("span");
                  info.innerHTML = files[i].name + ": " + files[i].size + " bytes";
                  li.appendChild(info);*/
                }
              }
            }
        </script>
  </body>
</html>

